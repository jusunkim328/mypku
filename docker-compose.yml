version: '3.9'
services:
  mypku-dev:
    image: node:20-alpine
    container_name: mypku-dev
    working_dir: /workspace

    volumes:
      - .:/workspace
      - node_modules:/workspace/node_modules
      - ~/.claude:/root/.claude

    ports:
      - "3000:3000"

    environment:
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - NODE_ENV=development

    stdin_open: true
    tty: true

    command: /bin/sh -c "
      apk add --no-cache bash git curl &&
      npm install -g bun &&
      cd /workspace &&
      bun install &&
      echo '✅ 개발 서버 시작 중...' &&
      bun run dev --hostname 0.0.0.0
      "

volumes:
  node_modules:
